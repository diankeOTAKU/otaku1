# <center><font color=blue>微光招新题之计算机系统之大数运算</font></center>
<font color=orange>（p.s.本人现在已经改行做前端了，这个是很久以前做的半成品，交来玩玩，能得个25分就不错了）</font>
## PART1 理解大数运算

### 1.为什么要使用字符数组来表示大数？
**答：**
1.主要是因为普通的变量（如int、long等）有其存储范围限制，无法直接表示超出这个范围的大整数。这对于一些需要处理极大数值的情况来说显然是不够的；
2.字符数组则没有范围限制。字符数组中的每个元素可以存储一个数字字符（如'0'、'1'、'9'等），我们就可以用它来表示出任意大小（任意位数）的数。

### 2.如何处理大数运算中的进位和借位问题？
**答：**
#### (1) . 加法中的进位问题
+ **从低位到高位逐位相加：**
当我们用两个字符数组表示两个大数时，可以从数组的末尾（即最低位）开始，逐位进行相加。
- **计算当前位的和：**
将两个对应位的数字相加。
- **处理进位：**
如果当前位的和大于等于10，那么就需要进位。进位的值是当前位和除以10的余数（对于加法来说，这个余数总是0，因为我们已经处理了当前位的和），而需要加到下一位的值是当前位和除以10的商。
- **更新结果数组：**
将当前位的和（如果小于10，则直接存储；如果等于10，则存储0并记得进位）存储到结果数组的对应位置。
-** 继续处理下一位：**
将进位值加到下一位的和上，然后重复上述步骤，直到处理完所有位。
- **处理最高位的进位：**
如果最后还有进位，需要在结果数组的最前面插入一个字符'1'。
#### (2) . 减法中的借位问题
- **从低位到高位逐位相减：**
与加法类似，我们从字符数组的末尾开始，逐位进行相减。
- **计算当前位的差：**
将两个对应位的数字相减。
- **处理借位：**
如果当前位的被减数小于减数，那么就需要借位。借位的操作可以看作是从上一位“借”一个10来，这样当前位就可以加上10再减去减数。同时，上一位需要减去1（因为它“借”出了一个10）。
- **更新结果数组：**
将当前位的差（如果为正数或0，则直接存储；如果为负数，则存储其绝对值并记得借位）存储到结果数组的对应位置。只不过这里有点小小の细节：如果当前位为负数，实际上我们应该将其转换为正数（即加上10），并在上一位进行借位。
- **继续处理下一位：**
根据是否需要借位，调整上一位的值，并重复上述步骤，直到处理完所有位。
- **处理结果的符号：**
如果最终结果的最高位是0（且不是整个结果都是0），并且我们是从一个正数减去一个正数得到的这个结果，那么结果应该是负数。我们需要在结果前面加上负号。

（ps.感觉好难阐释清楚啊qwq）

### 3.如何处理负数
**答：**
- **存储符号：**
我们需要一个额外的变量来存储大数的符号（正或负）。这通常是一个简单的整数变量，例如 int sign。在运算开始时，我们可以根据输入的大数是正是负来设置这个变量。
- **输入处理：**
当从用户输入或文件读取大数时，我们需要首先检查它是否是负数。如果是，那么我们需要记录这个事实（通过设置 sign 变量为负），并且在后续处理中只考虑数值部分（即去掉负号后的部分）。
- **符号处理：**
在进行加法或减法运算时，我们需要根据两个操作数的符号来决定结果的符号。例如，正数加正数或负数加负数结果为正，而正数加负数（或相反）则结果的符号取决于绝对值较大的那个数。
- **结果输出：**
在输出结果之前，我们需要根据 sign 变量的值来决定是否需要在结果前面加上负号。
- **数组处理：**
实际的数值运算（加法、减法、乘法、除法等）是在数组上进行的，这些数组存储了数值的每一位（通常是以字符串形式读入，然后转换为数字进行运算）。在处理负数时，我们通常不需要对数组本身进行特殊处理，因为数组只是用来存储数值的每一位，而不包含符号信息。

（ps.上述部分内容参考了网上资料，但并非复制粘贴）

## Part 2 初步实现大数运算

### Step 1 尝试存储大数
```
#include <stdio.h>
#include <string.h>

int main() 
{
    char big_number[40];
    
    printf("请随便输入一个大数（范围：0 到 2^128-1，即最多 39 位）：\n");
    scanf("%s", big_number);
   
    printf("您输入的大数为：\n%s", big_number);
   
    return 0;
}
```
图示：
[![pA845jK.png](https://s21.ax1x.com/2024/10/06/pA845jK.png)](https://imgse.com/i/pA845jK)

### Step 2 实现大数加法
```
#include <stdio.h>  
#include <string.h>  
#include <stdlib.h>  

#define M 39  

void jia(char* num1, char* num2, char* result);

int main()
{
    char num1[M + 1], num2[M + 1], result[M + 2];
    int len1, len2;

    printf("请随便输入一个大数 (不要超过2^128-1):\n");
    scanf("%s", num1);
    len1 = strlen(num1);

    printf("请再输入一个大数 (也不要超过2^128-1):\n");
    scanf("%s", num2);
    len2 = strlen(num2);

    jia(num1, num2, result);

    printf("它俩相加的结果是:\n%s\n", result);

    return 0;
}

void jia(char* num1, char* num2, char* result)
{
    int len1 = strlen(num1);
    int len2 = strlen(num2);
    int carry = 0;
    int i = len1 - 1;
    int j = len2 - 1;
    int k = 0;
 
    memset(result, '0', M + 1);
    result[M + 1] = '\0';   
  
    while (i >= 0 || j >= 0 || carry)
    {
        int digit1 = (i >= 0) ? num1[i] - '0' : 0;
        int digit2 = (j >= 0) ? num2[j] - '0' : 0;
        int sum = digit1 + digit2 + carry;  
        result[k] = (sum % 10) + '0';
        carry = sum / 10;
        k++;
        i--;
        j--;
    }
  
    int res = k;
    for (int l = 0; l < res / 2; l++)
    {
        char temp = result[l];
        result[l] = result[res - l - 1];
        result[res - l - 1] = temp;
    }
 
    result[res] = '\0';
  
}
```
图示：
[![pA8IO6P.png](https://s21.ax1x.com/2024/10/06/pA8IO6P.png)](https://imgse.com/i/pA8IO6P)

### Part 3 从表达式中提取操作数和操作符
```
哦豁没啦
```

